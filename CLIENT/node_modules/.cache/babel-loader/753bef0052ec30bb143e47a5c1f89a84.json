{"remainingRequest":"/Users/tule/Code/winbo.trade/node_modules/thread-loader/dist/cjs.js!/Users/tule/Code/winbo.trade/node_modules/babel-loader/lib/index.js!/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tule/Code/winbo.trade/src/layouts/history/ListHisRutTien.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tule/Code/winbo.trade/src/layouts/history/ListHisRutTien.vue","mtime":1639222662000},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport vSelect from 'vue-select';\nimport AuthenticationService from '@/services/AuthenticationService';\nimport moment from 'moment';\nimport Vue from 'vue';\nexport default {\n  components: {\n    vSelect: vSelect\n  },\n  data: function data() {\n    return {\n      clickDone: false,\n      clickRefuseDone: false,\n      showDeleteMultiBt: true,\n      activePrompt: false,\n      selectedUser: [],\n      fileName: \"\",\n      formats: [\"xlsx\", \"csv\", \"txt\"],\n      cellAutoWidth: true,\n      selectedFormat: \"xlsx\",\n      headerTitle: [\"Tài khoản\", \"Loại\", \"Số Tiền\", \"Trạng Thái\", \"Ngày Nạp\"],\n      headerVal: [\"account\", \"type\", \"amount\", \"status\", \"datecreate\"],\n      productsFake: [{\n        \"id\": 1,\n        \"from_u\": \"123\",\n        \"to_u\": \"5344\",\n        \"type_key\": \"nt\",\n        \"type\": \"Nạp tiền (Nội bộ)\",\n        \"currency\": \"sys\",\n        \"amount\": 100.00,\n        \"note\": \"\",\n        \"status\": 1,\n        \"created_at\": \"00:00:00 02-04-2021\"\n      }, {\n        \"id\": 2,\n        \"from_u\": \"123\",\n        \"to_u\": \"5344\",\n        \"type_key\": \"nt\",\n        \"type\": \"Nạp tiền (Nội bộ)\",\n        \"currency\": \"BTC\",\n        \"amount\": 100.00,\n        \"note\": \"ok nha\",\n        \"status\": 1,\n        \"created_at\": \"00:00:00 02-04-2021\"\n      }, {\n        \"id\": 3,\n        \"from_u\": \"123\",\n        \"to_u\": \"5344\",\n        \"type_key\": \"nt\",\n        \"type\": \"Nạp tiền (Nội bộ)\",\n        \"currency\": \"ETH\",\n        \"amount\": 100.00,\n        \"note\": \"\",\n        \"status\": 1,\n        \"created_at\": \"00:00:00 02-04-2021\"\n      }, {\n        \"id\": 5,\n        \"from_u\": \"123\",\n        \"to_u\": \"5344\",\n        \"type_key\": \"nt\",\n        \"type\": \"Nạp tiền (Nội bộ)\",\n        \"currency\": \"USDT\",\n        \"amount\": 100.00,\n        \"note\": \"\",\n        \"status\": 1,\n        \"created_at\": \"00:00:00 02-04-2021\"\n      }],\n      itemsPerPage: 10,\n      isMounted: false,\n      dtUSD: 0,\n      dtBNB: 0,\n      feeBNB: 0\n    };\n  },\n  computed: {\n    currentPage: function currentPage() {\n      if (this.isMounted) {\n        return this.$refs.table.currentx;\n      }\n\n      return 0;\n    },\n    products: function products() {\n      return this.productsFake;\n    },\n    queriedItems: function queriedItems() {\n      return this.$refs.table ? this.$refs.table.queriedResults.length : this.productsFake.length;\n    }\n  },\n  methods: {\n    deleteMultiple: function deleteMultiple() {\n      var _this = this;\n\n      var token = localStorage.getItem('token');\n      this.$store.dispatch('setToken', token);\n\n      if (this.selectedUser.length == 0) {\n        return this.$vs.notify({\n          text: 'Hãy chọn đối tượng cần xóa',\n          color: 'warning',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n      }\n\n      for (var i = this.selectedUser.length - 1; i >= 0; i--) {\n        var id = this.selectedUser[i]['id'];\n        var obj = {\n          id: id,\n          val: 1\n        };\n        AuthenticationService.deleteTrashByID(obj).then(function (resp) {\n          if (!resp.data.success) {\n            localStorage.removeItem('token');\n\n            _this.$router.push('/pages/login').catch(function () {});\n          }\n        });\n        Vue.delete(this.productsFake, i);\n      }\n\n      this.selectedUser = [];\n      return this.$vs.notify({\n        text: 'Đã xóa thành công',\n        color: 'success',\n        iconPack: 'feather',\n        icon: 'icon-check'\n      });\n    },\n    doneRefuseWithdra: function doneRefuseWithdra(id, index, amount, email, fee) {\n      var _this2 = this;\n\n      var obj = {\n        id: id,\n        amount: amount,\n        email: email,\n        fee: fee\n      };\n      AuthenticationService.doneRefuseWithDrawalByID(obj).then(function (resp) {\n        var d = resp.data;\n\n        if (d.success == 1) {\n          _this2.productsFake[index].status = 2;\n          return _this2.$vs.notify({\n            text: 'Đã hoàn trả lại số tiền',\n            color: 'success',\n            iconPack: 'feather',\n            icon: 'icon-check'\n          });\n        }\n      });\n    },\n    doneWithdra: function doneWithdra(id, index, val, address, amount, network) {\n      var _this3 = this;\n\n      var obj = {\n        id: id,\n        val: val,\n        amount: amount,\n        address: address,\n        network: network\n      }; //this.clickDone = true;\n\n      this.$vs.notify({\n        text: 'Đang thực hiện yêu cầu!',\n        color: 'warning',\n        iconPack: 'feather',\n        icon: 'icon-check'\n      });\n      AuthenticationService.doneWithDrawalByID(obj).then(function (resp) {\n        //this.clickDone = false;\n        var d = resp.data;\n\n        if (d.success) {\n          var gd = d.data;\n\n          if (gd.success == 1) {\n            _this3.productsFake[index].status = 1;\n\n            _this3.$vs.notify({\n              text: 'Đã quy đổi thành số tiền là: ' + gd.price_trans,\n              color: 'success',\n              iconPack: 'feather',\n              icon: 'icon-check'\n            });\n\n            return _this3.$vs.notify({\n              text: gd.msg,\n              color: 'success',\n              iconPack: 'feather',\n              icon: 'icon-check'\n            });\n          } else {\n            return _this3.$vs.notify({\n              text: gd.msg,\n              color: 'danger',\n              iconPack: 'feather',\n              icon: 'icon-check'\n            });\n          }\n        } else {\n          localStorage.removeItem('token');\n\n          _this3.$router.push('/pages/login').catch(function () {});\n        }\n      });\n    },\n    deleteWithdra: function deleteWithdra(id, index, val) {\n      var _this4 = this;\n\n      var token = localStorage.getItem('token');\n      this.$store.dispatch('setToken', token);\n      var obj = {\n        id: id,\n        val: val\n      };\n      AuthenticationService.deleteTrashByID(obj).then(function (resp) {\n        if (resp.data.success) {\n          Vue.delete(_this4.productsFake, index);\n          _this4.popupDeleteActive = false;\n          return _this4.$vs.notify({\n            text: 'Đã xóa thành công',\n            color: 'success',\n            iconPack: 'feather',\n            icon: 'icon-check'\n          });\n        } else {\n          localStorage.removeItem('token');\n\n          _this4.$router.push('/pages/login').catch(function () {});\n        }\n      });\n    },\n    trashDataDeposit: function trashDataDeposit() {\n      var _this5 = this;\n\n      this.showDeleteMultiBt = false;\n      var token = localStorage.getItem('token');\n      this.$store.dispatch('setToken', token);\n      AuthenticationService.getDepositAllTrash().then(function (resp) {\n        if (!resp.data.success) {\n          localStorage.removeItem('token');\n\n          _this5.$router.push('/pages/login').catch(function () {});\n        } else {\n          _this5.productsFake = resp.data.data;\n        }\n      });\n    },\n    getOrderStatusColor: function getOrderStatusColor(status) {\n      if (status == 0) return \"warning\";\n      if (status == 1) return \"success\";\n      if (status == 3) return \"danger\";\n      return \"warning\";\n    },\n    getOrderStatusColorText: function getOrderStatusColorText(status) {\n      if (status == 0) return \"Đang xử lý\";\n      if (status == 1) return \"Hoàn thành\";\n      if (status == 3) return \"Hoàn thành\";\n      return \"Đang xử lý\";\n    },\n    getIconType: function getIconType(type) {\n      var cur = type.toUpperCase();\n      return cur;\n    },\n    formatDate: function formatDate(value) {\n      if (value) {\n        return moment(String(value)).format('MM/DD/YYYY hh:mm:ss');\n      }\n    },\n    formatPrice: function formatPrice(value, minimum) {\n      if (void 0 === value) value = 0;\n      var formatter = new Intl.NumberFormat('en-US', {\n        //style: 'currency',\n        //currency: '',\n        minimumFractionDigits: minimum\n      });\n      return formatter.format(value);\n    },\n    getAmountDecimal: function getAmountDecimal(type, value) {\n      var cur = '$';\n      var coin = type.toUpperCase();\n      var minimum = 2;\n      if (coin == 'BTC') minimum = 6;\n      if (coin == 'ETH') minimum = 4;\n      if (coin == 'USDT') minimum = 2;\n      if (coin == 'VN') minimum = 0;\n      var formatter = new Intl.NumberFormat('en-US', {\n        //style: 'currency',\n        //currency: '',\n        minimumFractionDigits: minimum\n      });\n      return cur + formatter.format(value);\n    },\n    toggleDataSidebar: function toggleDataSidebar() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.addNewDataSidebar = val;\n    },\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    // export ra file\n    //==================================================================\n    exportToExcel: function exportToExcel() {\n      var _this6 = this;\n\n      // kiểm tra nếu chưa chọn đối tượng thình sẽ không hiện bản xuất file\n      if (this.selectedUser.length == 0) {\n        return this.$vs.notify({\n          title: 'Xuất dữ liệu',\n          text: 'Vui lòng chọn nội dung để hoàn thành',\n          color: 'danger',\n          iconPack: 'feather',\n          icon: 'icon-heart'\n        });\n      }\n\n      import('@/vendor/Export2Excel').then(function (excel) {\n        var list = _this6.selectedUser;\n\n        var data = _this6.formatJson(_this6.headerVal, list);\n\n        excel.export_json_to_excel({\n          header: _this6.headerTitle,\n          data: data,\n          filename: _this6.fileName,\n          autoWidth: _this6.cellAutoWidth,\n          bookType: _this6.selectedFormat\n        });\n\n        _this6.clearFields();\n      });\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          // Add col name which needs to be translated\n          // if (j === 'timestamp') {\n          //   return parseTime(v[j])\n          // } else {\n          //   return v[j]\n          // }\n          return v[j];\n        });\n      });\n    },\n    clearFields: function clearFields() {\n      this.fileName = \"\";\n      this.cellAutoWidth = true;\n      this.selectedFormat = \"xlsx\";\n    },\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    //==================================================================\n    openLoadingInDiv: function openLoadingInDiv() {\n      this.$vs.loading({\n        container: '#loading-corners',\n        type: 'corners',\n        scale: 0.6\n      });\n    },\n    reloadList: function reloadList() {\n      var _this7 = this;\n\n      this.showDeleteMultiBt = true;\n      var token = localStorage.getItem('token');\n      this.$store.dispatch('setToken', token);\n      AuthenticationService.getWithdrawalListHistory().then(function (resp) {\n        _this7.$vs.loading.close('#loading-corners > .con-vs-loading');\n\n        if (resp.data.success == 4) {\n          localStorage.removeItem('token');\n\n          _this7.$router.push('/pages/login').catch(function () {});\n        } else {\n          _this7.productsFake = resp.data.data;\n        }\n      });\n    },\n    getDTRut: function getDTRut() {\n      var _this8 = this;\n\n      AuthenticationService.getRevenueRut().then(function (resp) {\n        var g = resp.data;\n\n        if (g.success == 1) {\n          _this8.dtUSD = g.data.dtUSD;\n          _this8.dtBNB = g.data.dtBNB;\n          _this8.feeBNB = g.data.freeBNB;\n        }\n      });\n    }\n  },\n  created: function created() {\n    // if(!moduleDataList.isRegistered) {\n    //   this.$store.registerModule('dataList', moduleDataList)\n    //   moduleDataList.isRegistered = true\n    // }\n    //this.$store.registerModule('dataList', this.productsFake);\n    //this.$store.dispatch(\"dataList/fetchDataListItems\")\n    //console.log(this.productsFake);\n    //console.log(this.$store.state.dataList);\n    this.reloadList();\n    this.getDTRut();\n  },\n  mounted: function mounted() {\n    this.isMounted = true;\n    this.openLoadingInDiv();\n  }\n};",null]}