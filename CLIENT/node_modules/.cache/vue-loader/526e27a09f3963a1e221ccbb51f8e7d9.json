{"remainingRequest":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tule/Code/winbo.trade/src/pages/trade/slidebar/NapRutTien.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tule/Code/winbo.trade/src/pages/trade/slidebar/NapRutTien.vue","mtime":1650013377430},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\nimport getData from '@/pages/trade/navbar/components/data.json'\r\nimport AuthenticationService from '@/services/AuthenticationService'\r\nimport getSetSys  from '@/services/settingSys.json'\r\nimport { isMobile } from 'mobile-device-detect'\r\nimport QRCode from 'qrcode'\r\nimport makeid from '../../../utils/makeid';\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            pop2FAokPay: !this.DISABLE_2FA,\r\n            code2FA: '',\r\n\r\n            isNap: false,\r\n            isLoading: false,\r\n            isPaypal: false,\r\n            isVND: false,\r\n\r\n            checkispay: false,\r\n\r\n            textTypePay: 'USDT',\r\n\r\n            showSelectTypeC: false,\r\n\r\n            getAmount: 0,\r\n\r\n            amount: '',\r\n\r\n            adddressWithDrawal: '',\r\n\r\n            getData: getData,\r\n            getSetSys: getSetSys,\r\n            activeNRT: true,\r\n            isActiveSelectTransPaypal: true,\r\n            isActiveSelectTransNB: true,\r\n            isActiveSelectTransBEP20: false,\r\n            isActiveSelectTransERC20: false,\r\n\r\n            textAddress: '',\r\n\r\n            amountRut: 0,\r\n            addressRut: 0,\r\n            noteRut: '',\r\n            tenNganHang: '',\r\n            chiNhanhNganHang: '',\r\n            soTaiKhoan: '',\r\n            chuTaiKhoan: '',\r\n\r\n            balanceUSDT: 0,\r\n            balanceETH: 0,\r\n            balanceBTC: 0,\r\n            balancePaypal: 0,\r\n\r\n            colorLoading: '#fff',\r\n            ssDownSend: 'Kiểm tra',\r\n            bank: `${getData.displayName}_${makeid(4)}`,\r\n            isMobile,\r\n\r\n            DISABLE_2FA: false,\r\n        }\r\n    },\r\n    methods: {\r\n        enterMaxAmount(){\r\n            this.amount = this.parseLocaleNumber(this.getAmount)\r\n        },\r\n\r\n        DepositVND(){\r\n            if(this.amount < getSetSys.minDepositUSDT){\r\n                return this.$vs.notify({\r\n                    text: `Số tiền nạp tối thiểu là $${getSetSys.minDepositUSDT}.`,\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check',\r\n                    position:'top-right',\r\n                    color: 'danger'\r\n                });\r\n            }\r\n\r\n            let obj = {\r\n                a: Number(this.amount),\r\n                n: getData.displayName,\r\n                al: getSetSys.quotePriceVND * +this.amount,\r\n                b: this.bank,\r\n            }\r\n\r\n            AuthenticationService.depositVND(obj)\r\n            .then((res) => {\r\n                let d = res.data\r\n\r\n                if(d.success == 3 || d.success == 4){\r\n                    localStorage.removeItem('token')\r\n                    this.$router.push('/login').catch(() => {})\r\n                    return\r\n                }\r\n\r\n                if(d.success){\r\n                    this.isNap = false;\r\n                    return this.$vs.notify({\r\n                        text: 'Gửi yêu cầu nạp tiền thành công!',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        color: 'success',\r\n                        position:'top-right',\r\n                    });\r\n                }\r\n            })\r\n        },\r\n        \r\n        DepositPaypal(){\r\n            if(this.amount < getSetSys.minDepositPaypal){\r\n                return this.$vs.notify({\r\n                    text: `Số tiền nạp tối thiểu là $${getSetSys.minDepositPaypal}.`,\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check',\r\n                    position:'top-right',\r\n                    color: 'danger'\r\n                });\r\n            }\r\n\r\n            this.isNap = true\r\n\r\n            let obj = {\r\n                a: Number(this.amount),\r\n                n: getData.displayName,\r\n                // Bỏ qua 2fa\r\n                f: this.DISABLE_2FA,\r\n            }\r\n\r\n            AuthenticationService.depositPaypal(obj)\r\n            .then((res) => {\r\n                let d = res.data\r\n\r\n                if(d.success == 3 || d.success == 4){\r\n                    localStorage.removeItem('token')\r\n                    this.$router.push('/login').catch(() => {})\r\n                    return\r\n                }\r\n\r\n                if(d.success){\r\n                    this.$vs.notify({\r\n                        text: 'Vui lòng hoàn thành các bước để nạp tiền.',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        position:'top-right',\r\n                        color: 'success'\r\n                    });\r\n                    setTimeout(() =>{\r\n                        this.isNap = false\r\n                    }, 30000)\r\n                    window.open(res.data.link);\r\n                }\r\n            })\r\n        },\r\n\r\n        WithDrawalPaypal(){\r\n            if (!this.DISABLE_2FA) {\r\n                if(!getData.c2fa){\r\n                     return this.$vs.notify({\r\n                        text:'Bạn phải bật 2FA để yêu cầu rút tiền',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'})\r\n                }\r\n            }\r\n\r\n            // đây là số tiền nhập\r\n            let amount = Number(this.amount)\r\n            \r\n            if(amount <= 0 || amount == ''){\r\n                return this.$vs.notify({\r\n                    text:'Giá trị không hợp lệ',\r\n                    color:'danger',\r\n                    position:'top-right',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-x-circle'})\r\n            }\r\n\r\n            if(amount < getSetSys.maxWithdrawalUSDT){\r\n              return this.$vs.notify({\r\n                      text: `Số tiền rút tối thiểu là $${getSetSys.maxWithdrawalUSDT}.`,\r\n                      color:'danger',\r\n                      position:'top-right',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-x-circle'\r\n                  });\r\n            }\r\n\r\n            // mặc định rút nội bộ\r\n\r\n            let obj = {\r\n                amS: amount,\r\n                nick: getData.displayName,\r\n                gc: this.noteRut,\r\n                // bỏ qua 2fa\r\n                f: this.DISABLE_2FA,\r\n            }\r\n            \r\n            if(this.isActiveSelectTransPaypal){  // rút Nội bộ\r\n                \r\n\r\n                let phi = getSetSys.feeRutPaypalNoiBo;\r\n                let tongphi = amount + Number(phi);\r\n                \r\n                // kiểm tra số tiền gốc = số tiền nhập hay không\r\n                if(this.getAmount < tongphi){\r\n                    return this.$vs.notify({\r\n                        text: 'Số dư không đủ.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n                \r\n                AuthenticationService.withdrawalPaypalNoiBo(obj)\r\n                .then((res) => {\r\n                    let d = res.data\r\n\r\n                    if(d.success == 3 || d.success == 4){\r\n                        localStorage.removeItem('token')\r\n                        this.$router.push('/login').catch(() => {})\r\n                        return\r\n                    }\r\n                    \r\n                    if(res.data.success){\r\n                        return this.$vs.notify({\r\n                            text: 'Rút tiền thành công.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'success',\r\n                            position:'top-right',\r\n                        });\r\n                    }else{\r\n                        return this.$vs.notify({\r\n                            text: 'Số dư không đủ.',\r\n                            color:'danger',\r\n                            position:'top-right',\r\n                            iconPack: 'feather',\r\n                            icon:'icon-x-circle'\r\n                        });\r\n                    }\r\n                })\r\n\r\n            }\r\n            else\r\n            { \r\n\r\n                let phi = getSetSys.feeRutPaypalAcc\r\n                let tongphi = amount + phi\r\n                \r\n                // kiểm tra số tiền gốc = số tiền nhập hay không\r\n                if(this.getAmount < tongphi){\r\n                    return this.$vs.notify({\r\n                        text: 'Số dư không đủ.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n                \r\n                AuthenticationService.withdrawalPaypalAccount(obj)\r\n                .then((res) => {\r\n                    let d = res.data\r\n\r\n                    if(d.success == 3 || d.success == 4){\r\n                        localStorage.removeItem('token')\r\n                        this.$router.push('/login').catch(() => {})\r\n                        return\r\n                    }\r\n                    \r\n                    if(res.data.success){\r\n                        return this.$vs.notify({\r\n                            text: 'Rút tiền thành công.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'success',\r\n                            position:'top-right',\r\n                        });\r\n                    }else{\r\n                        return this.$vs.notify({\r\n                            text: 'Số dư không đủ.',\r\n                            color:'danger',\r\n                            position:'top-right',\r\n                            iconPack: 'feather',\r\n                            icon:'icon-x-circle'\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n            \r\n            \r\n        },\r\n\r\n        CopyAddress(){\r\n            const thisIns = this;\r\n            this.$copyText(this.textAddress).then(function() {\r\n                thisIns.$vs.notify({\r\n                    text: 'Đã sao chép',\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    position: 'top-right',\r\n                    icon: 'icon-check-circle'\r\n                })\r\n            })\r\n        },\r\n\r\n        CheckPAY(val){\r\n\r\n            if(!this.checkispay){\r\n\r\n                this.checkispay = true;\r\n                this.$vs.loading({\r\n                    //background: this.backgroundLoading,\r\n                    color: this.colorLoading,\r\n                    container: \"#button-with-loading\",\r\n                    scale: 0.45\r\n                });\r\n                let giay = 120;\r\n                let countD = setInterval(() => {\r\n                    this.ssDownSend = giay + 's'\r\n                    if(giay == 0){\r\n                        this.checkispay = false;\r\n                        this.$vs.loading.close(\"#button-with-loading > .con-vs-loading\")\r\n                        this.ssDownSend = 'Kiểm tra'\r\n                        clearInterval(countD)\r\n                    }\r\n                    giay--\r\n                }, 1000);\r\n\r\n                if(val == 'USDT'){\r\n                    AuthenticationService.checkGiaoDich({is: true})\r\n                    .then((res) => {\r\n                        let d = res.data;\r\n                        \r\n                        \r\n                        if(d.ok == 1){\r\n\r\n                            this.checkispay = false;\r\n                            this.$vs.loading.close(\"#button-with-loading > .con-vs-loading\");\r\n                            this.ssDownSend = 'Kiểm tra';\r\n                            clearInterval(countD);\r\n\r\n                            let mo = d.money ? d.money : 0;\r\n\r\n                            getData.balance += mo;\r\n\r\n                            return this.$vs.notify({\r\n                                text: d.msg,\r\n                                color: 'success',\r\n                                iconPack: 'feather',\r\n                                position: 'top-right',\r\n                                icon: 'icon-check-circle'\r\n                            })\r\n                        }else{\r\n                            return this.$vs.notify({\r\n                                text: d.msg,\r\n                                color: 'danger',\r\n                                iconPack: 'feather',\r\n                                position: 'top-right',\r\n                                icon: 'icon-check-circle'\r\n                            })\r\n                        }\r\n                    });\r\n                    \r\n                }\r\n            }else{\r\n                return this.$vs.notify({\r\n                    text: 'Vui lòng đợi!',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    position: 'top-right',\r\n                    icon: 'icon-check-circle'\r\n                })\r\n            }\r\n           \r\n        },\r\n\r\n        Withdrawal(){\r\n            if (!this.DISABLE_2FA) {\r\n                if(!getData.c2fa){\r\n                     return this.$vs.notify({\r\n                        text:'Bạn phải bật 2FA để yêu cầu rút tiền',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'})\r\n                }\r\n            }\r\n\r\n            // đây là số tiền nhập\r\n            let amount = Number(this.amount)\r\n            \r\n            if(amount <= 0 || amount == ''){\r\n                return this.$vs.notify({\r\n                    text:'Giá trị không hợp lệ',\r\n                    color:'danger',\r\n                    position:'top-right',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-x-circle'})\r\n            }\r\n\r\n            if(amount < getSetSys.minWithdrawalUSDT){\r\n              return this.$vs.notify({\r\n                      text: `Số tiền rút tối thiểu là $${getSetSys.minWithdrawalUSDT}.`,\r\n                      color:'danger',\r\n                      position:'top-right',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-x-circle'\r\n                  });\r\n            }\r\n\r\n            if (!this.DISABLE_2FA) {\r\n                this.pop2FAokPay = true;\r\n            }\r\n\r\n            if (this.DISABLE_2FA) {\r\n                // Bật 2FA thì mở lại cái này\r\n                this.WithdrawalOKPay();\r\n            }\r\n\r\n        },\r\n\r\n        WithdrawalOKPay(){\r\n            if (getData.mkt === 1) return;\r\n            if (!this.DISABLE_2FA) {\r\n                if(!getData.c2fa){\r\n                     return this.$vs.notify({\r\n                        text:'Bạn phải bật 2FA để yêu cầu rút tiền',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'})\r\n                }\r\n    \r\n                if (!this.code2FA.trim()) {\r\n                    return this.$vs.notify({\r\n                        text:'Bạn phải nhập 2FA để yêu cầu rút tiền',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'})\r\n                }\r\n            }\r\n            \r\n            // mặc định rút nội bộ\r\n\r\n            let amount = Number(this.amount);\r\n\r\n            let obj = {\r\n                amS: amount,\r\n                nick: getData.displayName,\r\n                gc: this.noteRut,\r\n                address: this.adddressWithDrawal,\r\n                nw: '',\r\n                code: this.code2FA,\r\n                amR: amount * getSetSys.quotePriceVND, // Số tiền VNĐ nhập\r\n                tenNganHang: this.tenNganHang,\r\n                chiNhanhNganHang: this.chiNhanhNganHang,\r\n                soTaiKhoan: this.soTaiKhoan,\r\n                chuTaiKhoan: this.chuTaiKhoan,\r\n                // bỏ qua 2fa\r\n                f: this.DISABLE_2FA,\r\n            }\r\n\r\n            const getAmountFormat = this.parseLocaleNumber(this.getAmount);\r\n\r\n            if (this.isVND) {\r\n                // Rút tiền qua thẻ ngân hàng\r\n                // kiểm tra số tiền gốc = số tiền nhập hay không\r\n                if(getAmountFormat < amount){\r\n                    return this.$vs.notify({\r\n                        text: 'Số dư không đủ.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n\r\n                if (!this.tenNganHang || !this.chiNhanhNganHang || !this.soTaiKhoan || !this.chuTaiKhoan) {\r\n                    return this.$vs.notify({\r\n                        text: 'Bạn cần nhập đủ thông tin ngân hàng của mình.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n\r\n                obj.nw = 'vnd';\r\n\r\n                AuthenticationService.withdrawalUsdtVND(obj)\r\n                .then((res) => {\r\n                    let d = res.data;\r\n\r\n                    if(d.success == 3 || d.success == 4){\r\n                        localStorage.removeItem('token')\r\n                        this.$router.push('/login').catch(() => {})\r\n                        return\r\n                    }\r\n\r\n                    // cập nhật lại tiền ví nếu thành công\r\n                    this.balanceUSDT = this.formatPrice(getAmountFormat - amount, 2)\r\n                    this.getAmount = this.balanceUSDT;\r\n\r\n                    if(res.data.success == 1){\r\n\r\n                        getData.balance -= amount;\r\n                        getData.balanceUSDT -= amount;\r\n\r\n                        return this.$vs.notify({\r\n                            text: 'Rút tiền thành công.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'success',\r\n                            position:'top-right',\r\n                        });\r\n                    }else if(res.data.success === 10){\r\n                        return this.$vs.notify({\r\n                            text: 'Tài khoản chưa được xác minh.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }else if(res.data.success === 2){\r\n                        return this.$vs.notify({\r\n                            text: 'Mã 2Fa không đúng.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }else{\r\n                        return this.$vs.notify({\r\n                            text: 'Số dư không đủ.',\r\n                            color:'danger',\r\n                            position:'top-right',\r\n                            iconPack: 'feather',\r\n                            icon:'icon-x-circle'\r\n                        });\r\n                    }\r\n                })\r\n\r\n                return;\r\n            }\r\n\r\n            \r\n            if(this.isActiveSelectTransNB){  // rút Nội bộ\r\n                let phi = getSetSys.feeRutUSDTNoiBo;\r\n                let tongphi = amount + Number(phi);\r\n                \r\n                // kiểm tra số tiền gốc = số tiền nhập hay không\r\n                if(getAmountFormat < tongphi){\r\n                    return this.$vs.notify({\r\n                        text: 'Số dư không đủ.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n\r\n                obj.nw = 'nb';\r\n                \r\n                AuthenticationService.withdrawalUserNoiBo(obj)\r\n                .then((res) => {\r\n                    let d = res.data\r\n                    \r\n\r\n                    if(d.success == 3 || d.success == 4){\r\n                        localStorage.removeItem('token')\r\n                        return this.$router.push('/login').catch(() => {})\r\n                    }\r\n\r\n                    if(d.success == 5){\r\n                        return this.$vs.notify({\r\n                            text: 'Biệt danh không đúng hoặc không tồn tại.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }\r\n\r\n                    \r\n                    if(d.success == 2){\r\n                        return this.$vs.notify({\r\n                            text: 'Mã 2FA không chính xác.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }\r\n                    \r\n                    if(res.data.success == 1){\r\n                        \r\n                        getData.balance -= tongphi;\r\n                        getData.balanceUSDT -= tongphi;\r\n\r\n                        return this.$vs.notify({\r\n                            text: 'Rút tiền thành công.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'success',\r\n                            position:'top-right',\r\n                        });\r\n                    }else if(res.data.success === 10){\r\n                        return this.$vs.notify({\r\n                            text: 'Tài khoản chưa được xác minh.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }else{\r\n                        return this.$vs.notify({\r\n                            text: 'Không tìm thấy người nhận.',\r\n                            color:'danger',\r\n                            position:'top-right',\r\n                            iconPack: 'feather',\r\n                            icon:'icon-x-circle'\r\n                        });\r\n                    }\r\n                })\r\n\r\n            }else if(this.isActiveSelectTransBEP20){ // rút BEP20 (BSC)\r\n            \r\n\r\n                let phi = getSetSys.feeRutUSDTBEP20;\r\n                let tongphi = amount + Number(phi);\r\n\r\n        \r\n                // kiểm tra số tiền gốc = số tiền nhập hay không\r\n\r\n                if(getAmountFormat < tongphi){\r\n                    return this.$vs.notify({\r\n                        text: 'Số dư không đủ.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n\r\n                obj.nw = 'bep20';\r\n                \r\n                AuthenticationService.withdrawalUsdtBSC(obj)\r\n                .then((res) => {\r\n                    let d = res.data;\r\n\r\n                    if(d.success == 3 || d.success == 4){\r\n                        localStorage.removeItem('token')\r\n                        this.$router.push('/login').catch(() => {})\r\n                        return\r\n                    }\r\n\r\n                    // cập nhật lại tiền ví nếu thành công\r\n                    this.balanceUSDT = this.formatPrice(Number(this.balanceUSDT) - tongphi, 2)\r\n                    this.getAmount = this.balanceUSDT;\r\n\r\n                    \r\n                    \r\n                    if(res.data.success == 1){\r\n\r\n                        getData.balance -= tongphi;\r\n                        getData.balanceUSDT -= tongphi;\r\n\r\n                        return this.$vs.notify({\r\n                            text: 'Rút tiền thành công.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'success',\r\n                            position:'top-right',\r\n                        });\r\n                    }else if(res.data.success === 10){\r\n                        return this.$vs.notify({\r\n                            text: 'Tài khoản chưa được xác minh.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }else if(res.data.success === 2){\r\n                        return this.$vs.notify({\r\n                            text: 'Mã 2Fa không đúng.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'danger',\r\n                            position:'top-right',\r\n                        });\r\n                    }else{\r\n                        return this.$vs.notify({\r\n                            text: 'Số dư không đủ.',\r\n                            color:'danger',\r\n                            position:'top-right',\r\n                            iconPack: 'feather',\r\n                            icon:'icon-x-circle'\r\n                        });\r\n                    }\r\n                })\r\n            }else if(this.isActiveSelectTransERC20){  // rút ERC 20\r\n                \r\n                let phi = getSetSys.feeRutUSDTERC20\r\n                let tongphi = amount + Number(phi)\r\n                \r\n                // kiểm tra số tiền gốc = số tiền nhập hay không\r\n                if(getAmountFormat < tongphi){\r\n                    return this.$vs.notify({\r\n                        text: 'Số dư không đủ.',\r\n                        color:'danger',\r\n                        position:'top-right',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-x-circle'\r\n                    });\r\n                }\r\n\r\n                obj.nw = 'erc20';\r\n                \r\n                AuthenticationService.withdrawalUsdtERC(obj)\r\n                .then((res) => {\r\n                    let d = res.data\r\n\r\n                    if(d.success == 3 || d.success == 4){\r\n                        localStorage.removeItem('token')\r\n                        this.$router.push('/login').catch(() => {})\r\n                        return\r\n                    }\r\n\r\n                    // cập nhật lại tiền ví nếu thành công\r\n                    this.balanceUSDT = this.formatPrice(Number(this.balanceUSDT) - tongphi, 2)\r\n                    this.getAmount = this.balanceUSDT\r\n\r\n                    \r\n                    \r\n                    if(res.data.success){\r\n                        getData.balance -= tongphi;\r\n                        getData.balanceUSDT -= tongphi;\r\n\r\n                        return this.$vs.notify({\r\n                            text: 'Rút tiền thành công.',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check',\r\n                            color: 'success',\r\n                            position:'top-right',\r\n                        });\r\n                    }else{\r\n                        return this.$vs.notify({\r\n                            text: 'Số dư không đủ.',\r\n                            color:'danger',\r\n                            position:'top-right',\r\n                            iconPack: 'feather',\r\n                            icon:'icon-x-circle'\r\n                        });\r\n                    }\r\n                })\r\n                \r\n            }\r\n            \r\n        },\r\n        selectTypePay(val){\r\n            this.isLoading = true\r\n            \r\n            if (val === 'VND') {\r\n                this.isVND = true;\r\n                this.isLoading = false;\r\n            } else {\r\n                this.isVND = false;\r\n                if(val !== 'PAYPAL'){\r\n                    setTimeout(() => {\r\n                        this.getAddressF(val)\r\n                    }, 100)\r\n                    this.isPaypal = false\r\n                } else{\r\n                    this.isPaypal = true\r\n                    this.isLoading = false\r\n                }\r\n            }\r\n\r\n            switch(val){\r\n                case 'PAYPAL':\r\n                    this.getAmount = this.balancePaypal\r\n                    break;\r\n                case 'USDT':\r\n                case 'VND':\r\n                    this.getAmount = this.balanceUSDT\r\n                    break;\r\n                case 'BTC':\r\n                    this.getAmount = this.balanceBTC\r\n                    break;\r\n                case 'ETH':\r\n                    this.getAmount = this.balanceETH\r\n                    break;\r\n                default:\r\n                    this.getAmount = this.amountPaypal\r\n            }\r\n\r\n            this.textTypePay = val\r\n        },\r\n\r\n        getAddressF(coint){\r\n\r\n            this.isLoading = true\r\n            AuthenticationService.getAddressCoin(coint)\r\n            .then((res) => {\r\n                this.isLoading = false\r\n                let d = res.data\r\n                if(d.success == 3 || d.success == 4){\r\n                    localStorage.removeItem('token')\r\n                    this.$router.push('/login').catch(() => {})\r\n                    return\r\n                }\r\n                this.textAddress = d.a\r\n\r\n                var canvas = document.querySelector('canvas')\r\n\r\n                QRCode.toCanvas(canvas, d.a, { \r\n                    margin: 1,\r\n                    color: {\r\n                        dark: '#fa2843',\r\n                    }\r\n                    }, function (error) {\r\n                    if (error) console.error(error)\r\n                        //console.log('success!');\r\n                })\r\n            })\r\n        },\r\n\r\n        getBalanceWallet(){\r\n            AuthenticationService.getBalanceWallet()\r\n            .then((res) => {\r\n                let d = res.data\r\n                if(d.success == 3 || d.success == 4){\r\n                    localStorage.removeItem('token')\r\n                    this.$router.push('/login').catch(() => {})\r\n                    return\r\n                }\r\n                if(d.success){\r\n                    let mU = d.data.usdt\r\n                    let mE = d.data.eth\r\n                    let mB = d.data.btc\r\n                    let mP = d.data.paypal\r\n\r\n                    this.balanceUSDT = this.formatPrice(mU, 2)\r\n                    this.balanceETH = this.formatPrice(mE, 4)\r\n                    this.balanceBTC = this.formatPrice(mB, 6)\r\n                    this.balancePaypal = this.formatPrice(mP, 2)\r\n\r\n                    // mặc định hiển thị tiền đầu vào\r\n                    this.getAmount = this.balanceUSDT\r\n                }\r\n            })\r\n        },\r\n        parseLocaleNumber(stringNumber, locale = 'en-US') {\r\n            var thousandSeparator = Intl.NumberFormat(locale).format(11111).replace(/\\p{Number}/gu, '');\r\n            var decimalSeparator = Intl.NumberFormat(locale).format(1.1).replace(/\\p{Number}/gu, '');\r\n\r\n            return parseFloat(stringNumber\r\n                .replace(new RegExp('\\\\' + thousandSeparator, 'g'), '')\r\n                .replace(new RegExp('\\\\' + decimalSeparator), '.')\r\n            );\r\n        },\r\n\r\n        formatPrice(value, minimum) {\r\n            var formatter = new Intl.NumberFormat('en-US', {\r\n                //style: 'currency',\r\n                //currency: '',\r\n                minimumFractionDigits: minimum\r\n            });\r\n            return formatter.format(value);\r\n        },\r\n    },\r\n    mounted() {\r\n       \r\n    },\r\n    created() {\r\n        \r\n        // lấy số tiền mặc định của ví\r\n        this.getAmount = this.amountPaypal\r\n\r\n        // lấy mặc định coin USDT\r\n        this.getAddressF('USDT')\r\n\r\n        // lấy số tiền cái ví\r\n        this.getBalanceWallet()\r\n\r\n\r\n    },\r\n}\r\n",null]}