{"remainingRequest":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tule/Code/winbo.trade/src/layouts/account/AccountAgencyList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tule/Code/winbo.trade/src/layouts/account/AccountAgencyList.vue","mtime":1636104450000},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport DataViewSidebar from '@/layouts/account/slidebar/DataViewSidebar.vue'\r\nimport vSelect from 'vue-select'\r\nimport AuthenticationService from '@/services/AuthenticationService'\r\nimport Vue from 'vue'\r\n\r\nexport default {\r\n  components: {\r\n    DataViewSidebar,\r\n    vSelect\r\n  },\r\n  data() {\r\n    return {\r\n      getAdress: '',\r\n      getPrivateKey: '',\r\n      getWfiKey: '',\r\n\r\n      popupAdressWallet: false,\r\n\r\n      UserInfo: {},\r\n      popupDeleteActive: false,\r\n      activePrompt: false,\r\n      selectedUser: [],\r\n      fileName: \"\",\r\n      formats:[\"xlsx\", \"csv\", \"txt\"],\r\n      cellAutoWidth: true,\r\n      selectedFormat: \"xlsx\",\r\n      headerTitle: [\"Id\", \"Email\", \"Nick\", \"Ví\", \"Tổng thành viên\", \"Commission\" ],\r\n      headerVal: [\"id\", \"email\", \"nickname\", \"wallet\", \"memberForAgency\",\"pending_commission\" ],\r\n      productsFake: [\r\n            {\r\n              \"id\": 1,\r\n              \"email\": \"tesst@gmail.com\",\r\n              \"nick_name\": \"SkyPlaza\",\r\n              \"first_name\": \"Ares\",\r\n              \"profile_image\": \"https://vi.vuejs.org/images/logo.png\",\r\n              \"money_vn\": 100.00,\r\n              \"money_btc\": 0.000000,\r\n              \"money_eth\": 0.0100,\r\n              \"money_usdt\": 1.00,\r\n              \"money_paypal\": 0.00,\r\n              \"manage_supers\": 1,\r\n              \"pending_commission\": 0.00,\r\n              \"active_2fa\": 0,\r\n              \"created_at\": \"00:00:00 02-04-2021\"\r\n            },\r\n            {\r\n              \"id\": 2,\r\n              \"email\": \"tesst@gmail.com\",\r\n              \"nick_name\": \"SkyPlaza\",\r\n              \"first_name\": \"Ares\",\r\n              \"profile_image\": \"https://vi.vuejs.org/images/logo.png\",\r\n              \"money_vn\": 100.00,\r\n              \"money_btc\": 0.000000,\r\n              \"money_eth\": 0.0100,\r\n              \"money_usdt\": 1.00,\r\n              \"money_paypal\": 0.00,\r\n              \"manage_supers\": 0,\r\n              \"pending_commission\": 0.00,\r\n              \"active_2fa\": 1,\r\n              \"created_at\": \"01:00:00 02-04-2021\"\r\n            },\r\n        ],\r\n      itemsPerPage: 10,\r\n      isMounted: false,\r\n\r\n      // Data Sidebar\r\n      addNewDataSidebar: false,\r\n      sidebarData: {},\r\n    }\r\n  },\r\n  computed: {\r\n    currentPage() {\r\n      if(this.isMounted) {\r\n        return this.$refs.table.currentx\r\n      }\r\n      return 0\r\n    },\r\n    products() {\r\n      return this.productsFake\r\n    },\r\n    queriedItems() {\r\n      return this.$refs.table ? this.$refs.table.queriedResults.length : this.productsFake.length\r\n    }\r\n  },\r\n  methods: {\r\n    clickGetAddress(a, p, w){\r\n        this.popupAdressWallet = true\r\n        if(w != '') {\r\n          this.getWfiKey = w\r\n        }else{\r\n          this.getWfiKey = 'N/A'\r\n        }\r\n        this.getAdress = a \r\n        this.getPrivateKey = p \r\n    },\r\n\r\n    onCopy() {\r\n          this.$vs.notify({\r\n              text: 'Đã sao chép vào bộ nhớ',\r\n              color: 'success',\r\n              iconPack: 'feather',\r\n              position: 'top-center',\r\n              icon: 'icon-check-circle'\r\n          })\r\n      },\r\n\r\n    viewPeopelAgency(id, index){\r\n      AuthenticationService.viewMemberAgency(id)\r\n      .then((resq) => {\r\n        if(resq.data.success){\r\n          let num = resq.data.data[0].totalPeopel\r\n          if(num == 0){\r\n            this.productsFake[index].sponsor = 'Chưa có thành viên'\r\n          }else{\r\n            this.productsFake[index].sponsor = this.formatPrice(num ,0)\r\n          }\r\n          \r\n        }\r\n      })\r\n    },\r\n    deleteMultiple(){\r\n      for(var i = this.selectedUser.length - 1; i >= 0 ;i--){\r\n          let id = this.selectedUser[i]['id'];\r\n          AuthenticationService.deleteMember(id)\r\n          Vue.delete(this.productsFake, i)\r\n      }\r\n      this.selectedUser = []\r\n      return this.$vs.notify({\r\n          text:'Đã xóa thành công',\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'});\r\n    },\r\n    openPopDelete(data){\r\n      this.UserInfo = data\r\n      this.popupDeleteActive = true\r\n    },\r\n    deleteUser(id, index) {\r\n      \r\n      AuthenticationService.deleteMember(id)\r\n        .then((resp) => {\r\n          if(resp.data.success){\r\n              Vue.delete(this.productsFake, index)\r\n              this.popupDeleteActive = false\r\n              return this.$vs.notify({\r\n                  text:'Đã xóa thành công',\r\n                  color:'success',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check'});\r\n          }\r\n        })\r\n    },\r\n    formatPrice(value, minimum) {\r\n        var formatter = new Intl.NumberFormat('en-US', {\r\n            //style: 'currency',\r\n            //currency: '',\r\n            minimumFractionDigits: minimum\r\n        });\r\n        return formatter.format(value);\r\n    },\r\n    addMoneyUser(data){\r\n      data[\"type\"] = 'addMoney'\r\n      this.sidebarData = data      \r\n      this.toggleDataSidebar(true)\r\n    },\r\n    addNewAccount(){\r\n      this.sidebarData = {}\r\n      this.toggleDataSidebar(true)\r\n    },\r\n    editUser(data) {\r\n      delete data[\"type\"]\r\n      // this.sidebarData = JSON.parse(JSON.stringify(this.blankData))\r\n      this.sidebarData = data\r\n      this.toggleDataSidebar(true)\r\n      \r\n    },\r\n    getOrderStatusColor(status) {\r\n      if(status == 0) return \"warning\"\r\n      if(status == 1) return \"success\"\r\n      //if(status == 2) return \"danger\"\r\n      return \"warning\"\r\n    },\r\n    getOrderStatusColorText(status) {\r\n      if(status == 0) return \"Chưa bật\"\r\n      if(status == 1) return \"Đã bật\"\r\n      //if(status == 2) return \"danger\"\r\n      return \"Chưa bật\"\r\n    },\r\n    toggleDataSidebar(val=false) {\r\n      this.addNewDataSidebar = val\r\n    },\r\n\r\n    // export ra file\r\n    exportToExcel() {\r\n        // kiểm tra nếu chưa chọn đối tượng thình sẽ không hiện bản xuất file\r\n      if(this.selectedUser.length == 0){\r\n        return this.$vs.notify({\r\n            title:'Xuất dữ liệu',\r\n            text:'Vui lòng chọn nội dung để hoàn thành',\r\n            color:'danger',\r\n            iconPack: 'feather',\r\n            icon:'icon-heart'});\r\n      } \r\n      import('@/vendor/Export2Excel').then(excel => {\r\n        const list = this.selectedUser\r\n        const data = this.formatJson(this.headerVal, list)\r\n        excel.export_json_to_excel({\r\n          header: this.headerTitle,\r\n          data,\r\n          filename: this.fileName,\r\n          autoWidth: this.cellAutoWidth,\r\n          bookType: this.selectedFormat\r\n        })\r\n        this.clearFields()\r\n      })\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v => filterVal.map(j => {\r\n        // Add col name which needs to be translated\r\n        // if (j === 'timestamp') {\r\n        //   return parseTime(v[j])\r\n        // } else {\r\n        //   return v[j]\r\n        // }\r\n\r\n        return v[j]\r\n      }))\r\n    },\r\n    clearFields() {\r\n      this.fileName = \"\"\r\n      this.cellAutoWidth = true\r\n      this.selectedFormat = \"xlsx\"\r\n    },\r\n\r\n    openLoadingInDiv(){\r\n            this.$vs.loading({\r\n                container: '#loading-corners',\r\n                type: 'corners',\r\n                scale: 0.6\r\n            })\r\n    },\r\n\r\n  },\r\n  created() {\r\n    // if(!moduleDataList.isRegistered) {\r\n    //   this.$store.registerModule('dataList', moduleDataList)\r\n    //   moduleDataList.isRegistered = true\r\n    // }\r\n\r\n    //this.$store.registerModule('dataList', this.productsFake);\r\n    \r\n    //this.$store.dispatch(\"dataList/fetchDataListItems\")\r\n    //console.log(this.productsFake);\r\n    //console.log(this.$store.state.dataList);\r\n\r\n    let token = localStorage.getItem('token')\r\n    this.$store.dispatch('setToken', token)\r\n\r\n    AuthenticationService.getListAgency()\r\n    .then((resp) => {\r\n\r\n      this.$vs.loading.close('#loading-corners > .con-vs-loading');\r\n\r\n      if(resp.data.success == 4){\r\n          localStorage.removeItem('token');\r\n          this.$router.push('/pages/login').catch(() => {})\r\n      }else{\r\n          this.productsFake = resp.data.data;\r\n      }\r\n    })\r\n\r\n  },\r\n  mounted() {\r\n    this.isMounted = true;\r\n    this.openLoadingInDiv();\r\n  }\r\n}\r\n",null]}