{"remainingRequest":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tule/Code/winbo.trade/src/layouts/account/AccountAllMemberList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tule/Code/winbo.trade/src/layouts/account/AccountAllMemberList.vue","mtime":1650596263972},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tule/Code/winbo.trade/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tule/Code/winbo.trade/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport DataViewSidebar from '@/layouts/account/slidebar/DataViewSidebar.vue'\r\nimport vSelect from 'vue-select'\r\nimport AuthenticationService from '@/services/AuthenticationService'\r\nimport moment from 'moment'\r\nimport Vue from 'vue'\r\nimport { VTree, VSelectTree}  from 'vue-tree-halower'\r\n\r\nexport default {\r\n  components: {\r\n    DataViewSidebar,\r\n    vSelect,\r\n    VTree,\r\n    //VSelectTree\r\n  },\r\n  data() {\r\n    return {\r\n      tslgdCD1: 0,\r\n      tslgdCD2: 0,\r\n      tslgdCD3: 0,\r\n      tslgdCD4: 0,\r\n\r\n      treeData: [\r\n        {\r\n        title: 'node1',\r\n        expanded: true,\r\n        children: [\r\n                {\r\n                title: \"<span style='color: red'>node 1-1</span>\",\r\n                expanded: true,\r\n                children: [\r\n                      {\r\n                        title: 'node 1-1-1'\r\n                      }, {\r\n                        title: 'node 1-1-2'\r\n                      }, {\r\n                        title: 'node 1-1-3'\r\n                      }\r\n                  ]\r\n                }, \r\n                {\r\n                  title: \"<span style='color: red'>node 1-2</span>\",\r\n                  children: [\r\n                    {\r\n                      title: \"node 1-2-1\"\r\n                    }, {\r\n                      title: \"node 1-2-2\"\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n        ],\r\n      popupF1F7: false,\r\n      getAdress: '',\r\n      getPrivateKey: '',\r\n      getWfiKey: '',\r\n      popupAdressWallet: false,\r\n\r\n      UserInfo: {},\r\n      popupDeleteActive: false,\r\n      activePrompt: false,\r\n      selectedUser: [],\r\n      fileName: \"\",\r\n      formats:[\"xlsx\", \"csv\", \"txt\"],\r\n      cellAutoWidth: true,\r\n      selectedFormat: \"xlsx\",\r\n      headerTitle: [\"Id\", \"Email\", \"Nick\", \"Money\", \"Commission\", \"Date Create\" ],\r\n      headerVal: [\"id\", \"email\", \"nickname\", \"wallet\", \"pending_commission\", \"created_at\" ],\r\n      productsFake: [\r\n            {\r\n              \"id\": 1,\r\n              \"email\": \"abc@gmail.com\",\r\n              \"nick_name\": \"SkyPlaza\",\r\n              \"first_name\": \"Ares\",\r\n              \"last_name\": \"BO\",\r\n              \"profile_image\": \"https://vi.vuejs.org/images/logo.png\",\r\n              \"money_vn\": 100.00,\r\n              \"money_btc\": 0.000000,\r\n              \"money_eth\": 0.0100,\r\n              \"money_usdt\": 1.00,\r\n              \"money_paypal\": 0.00,\r\n              \"manage_supers\": 1,\r\n              \"pending_commission\": 0.00,\r\n              \"active_2fa\": 0,\r\n              \"created_at\": \"00:00:00 02-04-2021\"\r\n            },\r\n            {\r\n              \"id\": 2,\r\n              \"email\": \"abc@gmail.com\",\r\n              \"nick_name\": \"SkyPlaza 3\",\r\n              \"first_name\": \"KK\",\r\n              \"last_name\": \"Ares\",\r\n              \"profile_image\": \"https://vi.vuejs.org/images/logo.png\",\r\n              \"money_vn\": 100.00,\r\n              \"money_btc\": 0.000000,\r\n              \"money_eth\": 0.0100,\r\n              \"money_usdt\": 1.00,\r\n              \"money_paypal\": 0.00,\r\n              \"manage_supers\": 0,\r\n              \"pending_commission\": 0.00,\r\n              \"active_2fa\": 1,\r\n              \"created_at\": \"01:00:00 02-04-2021\"\r\n            },\r\n        ],\r\n      itemsPerPage: 10,\r\n      isMounted: false,\r\n\r\n      // Data Sidebar\r\n      addNewDataSidebar: false,\r\n      sidebarData: {},\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    currentPage() {\r\n      if(this.isMounted) {\r\n        return this.$refs.table.currentx\r\n      }\r\n      return 0\r\n    },\r\n    products() {\r\n      return this.productsFake\r\n    },\r\n    queriedItems() {\r\n      return this.$refs.table ? this.$refs.table.queriedResults.length : this.productsFake.length\r\n    }\r\n  },\r\n  methods: {\r\n    showF1F7(nick, ref, email){\r\n\r\n      \r\n      this.popupF1F7 = true;\r\n\r\n      this.openLoadingInDiv2();\r\n\r\n      this.treeData = [{\r\n              title: nick,\r\n              expanded: true,\r\n              children: []\r\n            }];\r\n\r\n        let obj = {\r\n            nick: nick,\r\n            ref: ref,\r\n            email: email\r\n        }\r\n\r\n        //console.log(Object.keys(test).length);\r\n     \r\n        AuthenticationService.getListF1F7(obj)\r\n        .then((resp) => {\r\n\r\n          this.$vs.loading.close('#loading-corners2 > .con-vs-loading');\r\n\r\n          if(resp.data.success){\r\n\r\n              let data = resp.data.data;\r\n              let obj =  resp.data.obj;\r\n              this.tslgdCD1 = obj.tslgdCD1;\r\n              this.tslgdCD2 = obj.tslgdCD2;\r\n              this.tslgdCD3 = obj.tslgdCD3;\r\n              this.tslgdCD4 = obj.tslgdCD4;\r\n              \r\n              let c = 0;\r\n              for(let obj in data) {\r\n                c++;\r\n                for(let i = 0; i < data[obj].length; i++){\r\n                  this.treeData[0].children.push({title: `<span style='color: white'>Cấp ${c} - ${data[obj][i].nick_name} - Khối lượng Giao Dịch: ${ this.formatPrice(data[obj][i].tklgd, 2)}</span> - Tổng tiền nạp: ${this.formatPrice(data[obj][i].amt, 2)}`})\r\n                }\r\n              }   \r\n          }\r\n        })\r\n\r\n    },\r\n\r\n    openLoadingInDiv2(){\r\n        this.$vs.loading({\r\n            container: '#loading-corners2',\r\n            type: 'corners',\r\n            scale: 0.6\r\n        })\r\n    },\r\n\r\n    openLoadingInDiv(){\r\n            this.$vs.loading({\r\n                container: '#loading-corners',\r\n                type: 'corners',\r\n                scale: 0.6\r\n            })\r\n    },\r\n\r\n    async changeAccType(tr){\r\n      const {id, v} = tr;\r\n        let obj = {\r\n            id: id,\r\n            type: v ? 0 : 1\r\n        }\r\n\r\n        const resp = await AuthenticationService.changeAccMarketing(obj)\r\n        if(resp.data.success === -1){\r\n            tr.marketing = false;\r\n            return this.$vs.notify({\r\n                text: resp.data.message,\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'});\r\n        } else {\r\n          if(resp.data.success){\r\n              return this.$vs.notify({\r\n                  text:'Đã thay đổi thành công tài khoản!',\r\n                  color:'success',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check'});\r\n          }else{\r\n            localStorage.removeItem('token');\r\n            this.$router.push('/pages/login').catch(() => {})\r\n          }\r\n        }\r\n    },\r\n\r\n    clickGetAddress(a, p, w){\r\n        this.popupAdressWallet = true\r\n        if(w != '') {\r\n          this.getWfiKey = w\r\n        }else{\r\n          this.getWfiKey = 'N/A'\r\n        }\r\n        this.getAdress = a \r\n        this.getPrivateKey = p \r\n    },\r\n\r\n    onCopy() {\r\n          this.$vs.notify({\r\n              text: 'Đã sao chép vào bộ nhớ',\r\n              color: 'success',\r\n              iconPack: 'feather',\r\n              position: 'top-center',\r\n              icon: 'icon-check-circle'\r\n          })\r\n      },\r\n    deleteMultiple(){\r\n\r\n      for(var i = this.selectedUser.length - 1; i >= 0 ;i--){\r\n          let id = this.selectedUser[i]['id'];\r\n          AuthenticationService.deleteMember(id)\r\n          Vue.delete(this.productsFake, i)\r\n      }\r\n      this.selectedUser = []\r\n      return this.$vs.notify({\r\n          text:'Đã xóa thành công',\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'});\r\n    },\r\n    openPopDelete(data){\r\n      this.UserInfo = data\r\n      this.popupDeleteActive = true\r\n    },\r\n\r\n    deleteUser(id, index) {\r\n      let token = localStorage.getItem('token')\r\n      this.$store.dispatch('setToken', token)\r\n\r\n      AuthenticationService.deleteMember(id)\r\n        .then((resp) => {\r\n          if(resp.data.success){\r\n              Vue.delete(this.productsFake, index)\r\n              this.popupDeleteActive = false\r\n              return this.$vs.notify({\r\n                  text:'Đã xóa thành công',\r\n                  color:'success',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check'});\r\n          }else{\r\n            localStorage.removeItem('token');\r\n            this.$router.push('/pages/login').catch(() => {})\r\n          }\r\n        })\r\n    },\r\n    formatPrice(value, minimum) {\r\n        var formatter = new Intl.NumberFormat('en-US', {\r\n            //style: 'currency',\r\n            //currency: '',\r\n            minimumFractionDigits: minimum\r\n        });\r\n        return formatter.format(value);\r\n    },\r\n    formatDate(value){\r\n      if (value) {\r\n          return moment(String(value)).format('MM/DD/YYYY hh:mm:ss')\r\n      }\r\n    },\r\n    addMoneyUser(data){\r\n      data[\"type\"] = 'addMoney'\r\n      this.sidebarData = data      \r\n      this.toggleDataSidebar(true)\r\n    },\r\n    addNewAccount(){\r\n      this.sidebarData = {}\r\n      this.toggleDataSidebar(true)\r\n    },\r\n    editUser(data) {\r\n      delete data[\"type\"]\r\n      // this.sidebarData = JSON.parse(JSON.stringify(this.blankData))\r\n      this.sidebarData = data\r\n      this.toggleDataSidebar(true)\r\n      \r\n    },\r\n    getOrderStatusColor(status) {\r\n      if(status == 0) return \"warning\"\r\n      if(status == 1) return \"success\"\r\n      //if(status == 2) return \"danger\"\r\n      return \"warning\"\r\n    },\r\n    getOrderStatusColorText(status) {\r\n      if(status == 0) return \"Chưa bật\"\r\n      if(status == 1) return \"Đã bật\"\r\n      //if(status == 2) return \"danger\"\r\n      return \"Chưa bật\"\r\n    },\r\n    toggleDataSidebar(val=false) {\r\n      this.addNewDataSidebar = val\r\n    },\r\n\r\n\r\n    \r\n\r\n    // export ra file\r\n    exportToExcel() {\r\n        // kiểm tra nếu chưa chọn đối tượng thình sẽ không hiện bản xuất file\r\n      if(this.selectedUser.length == 0){\r\n        return this.$vs.notify({\r\n            title:'Xuất dữ liệu',\r\n            text:'Vui lòng chọn nội dung để hoàn thành',\r\n            color:'danger',\r\n            iconPack: 'feather',\r\n            icon:'icon-heart'});\r\n      } \r\n      import('@/vendor/Export2Excel').then(excel => {\r\n        const list = this.selectedUser\r\n        const data = this.formatJson(this.headerVal, list)\r\n        excel.export_json_to_excel({\r\n          header: this.headerTitle,\r\n          data,\r\n          filename: this.fileName,\r\n          autoWidth: this.cellAutoWidth,\r\n          bookType: this.selectedFormat\r\n        })\r\n        this.clearFields()\r\n      })\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v => filterVal.map(j => {\r\n        // Add col name which needs to be translated\r\n        // if (j === 'timestamp') {\r\n        //   return parseTime(v[j])\r\n        // } else {\r\n        //   return v[j]\r\n        // }\r\n\r\n        return v[j]\r\n      }))\r\n    },\r\n    clearFields() {\r\n      this.fileName = \"\"\r\n      this.cellAutoWidth = true\r\n      this.selectedFormat = \"xlsx\"\r\n    }\r\n  },\r\n  created() {\r\n    // if(!moduleDataList.isRegistered) {\r\n    //   this.$store.registerModule('dataList', moduleDataList)\r\n    //   moduleDataList.isRegistered = true\r\n    // }\r\n\r\n    //this.$store.registerModule('dataList', this.productsFake);\r\n    \r\n    //this.$store.dispatch(\"dataList/fetchDataListItems\")\r\n\r\n    //console.log(this.$store.state.dataList);\r\n    let token = localStorage.getItem('token')\r\n    this.$store.dispatch('setToken', token)\r\n\r\n    AuthenticationService.getAllMember()\r\n    .then((resp) => {\r\n      \r\n      this.$vs.loading.close('#loading-corners > .con-vs-loading');\r\n\r\n      if(resp.data.success == 4){\r\n          localStorage.removeItem('token');\r\n          this.$router.push('/pages/login').catch(() => {})\r\n      }else{\r\n          this.productsFake = resp.data.data;\r\n      }\r\n    })\r\n\r\n  },\r\n  mounted() {\r\n    this.isMounted = true;\r\n    this.openLoadingInDiv();\r\n  }\r\n}\r\n",null]}